<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dmap_example (tjr_pcache_example.Tjr_pcache_example.Dmap_example)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">tjr_pcache_example</a> &#x00BB; <a href="../index.html">Tjr_pcache_example</a> &#x00BB; Dmap_example</nav><h1>Module <code>Tjr_pcache_example.Dmap_example</code></h1></header><aside><p>An example use of the detachable map, for an on-disk persistent cache, with key type int, value type int</p><p>Suppose the block size is B bytes. Then we need xxx bytes (1 for list elt, 1 for option tag, 9 for ptr; xxx=11) for the End_of_list marker.</p><ul><li>(B-xxx) bytes are available for data</li></ul><p>When we write eg Insert(k,v), we potentially use 1+|k|+|v| bytes. We need to be very careful that this doesn't exceed the B-xxx limit. Particularly, if values can be largeish (eg 256 bytes) we need to take great care.</p></aside><dl><dt class="spec value" id="val-blk_sz"><a href="#val-blk_sz" class="anchor"></a><code><span class="keyword">val</span> blk_sz : int</code></dt></dl><dl><dt class="spec type" id="type-buf"><a href="#type-buf" class="anchor"></a><code><span class="keyword">type</span> buf</code><code> = Bin_prot.Common.buf</code></dt></dl><dl><dt class="spec value" id="val-create_buf"><a href="#val-create_buf" class="anchor"></a><code><span class="keyword">val</span> create_buf : int <span>&#45;&gt;</span> Bin_prot.Common.buf</code></dt></dl><dl><dt class="spec type" id="type-ptr"><a href="#type-ptr" class="anchor"></a><code><span class="keyword">type</span> ptr</code><code> = int</code></dt></dl><div class="spec module" id="module-Config"><a href="#module-Config" class="anchor"></a><code><span class="keyword">module</span> <a href="Config/index.html">Config</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Fstore"><a href="#module-Fstore" class="anchor"></a><code><span class="keyword">module</span> <a href="Fstore/index.html">Fstore</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Pcl_elt"><a href="#module-Pcl_elt" class="anchor"></a><code><span class="keyword">module</span> <a href="Pcl_elt/index.html">Pcl_elt</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Pl_impl"><a href="#module-Pl_impl" class="anchor"></a><code><span class="keyword">module</span> <a href="Pl_impl/index.html">Pl_impl</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Internal_read_node"><a href="#module-Internal_read_node" class="anchor"></a><code><span class="keyword">module</span> <a href="Internal_read_node/index.html">Internal_read_node</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Pcl_impl"><a href="#module-Pcl_impl" class="anchor"></a><code><span class="keyword">module</span> <a href="Pcl_impl/index.html">Pcl_impl</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-With_dmap"><a href="#module-With_dmap" class="anchor"></a><code><span class="keyword">module</span> <a href="With_dmap/index.html">With_dmap</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-S"><a href="#module-S" class="anchor"></a><code><span class="keyword">module</span> <a href="S/index.html">S</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Pcache"><a href="#module-Pcache" class="anchor"></a><code><span class="keyword">module</span> <a href="Pcache/index.html">Pcache</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><div class="spec module" id="module-Test"><a href="#module-Test" class="anchor"></a><code><span class="keyword">module</span> <a href="Test/index.html">Test</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div></div></body></html>