<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Detachable_chunked_list (tjr_pcache.Tjr_pcache__.Detachable_chunked_list)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">tjr_pcache</a> &#x00BB; <a href="../index.html">Tjr_pcache__</a> &#x00BB; Detachable_chunked_list</nav><h1>Module <code>Tjr_pcache__.Detachable_chunked_list</code></h1></header><aside><p>A &quot;detachable list&quot;, with an operation <code>detach</code> to drop everything but the current node.</p><p>NOTE this code is not concurrent safe. Access must be serialized.</p></aside><div class="spec module" id="module-Internal"><a href="#module-Internal" class="anchor"></a><code><span class="keyword">module</span> <a href="Internal/index.html">Internal</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></div><dl><dt class="spec value" id="val-make_dcl_ops"><a href="#val-make_dcl_ops" class="anchor"></a><code><span class="keyword">val</span> make_dcl_ops : <span>monad_ops:<span><span class="type-var">'t</span> Tjr_monad.monad_ops</span></span> <span>&#45;&gt;</span> <span>pcl_ops:<span><span>(<span class="type-var">'op</span>, <span class="type-var">'ptr</span>, <span class="type-var">'t</span>)</span> <a href="../../Tjr_pcache/Pcache_intf/Pcl_types/index.html#type-pcl_ops">Tjr_pcache.Pcache_intf.Pcl_types.pcl_ops</a></span></span> <span>&#45;&gt;</span> <span>with_dcl:<span><span>(<span><span>(<span class="type-var">'ptr</span>, <span class="type-var">'abs</span>)</span> <a href="../../Tjr_pcache/Pcache_intf/Dcl_types/index.html#type-dcl_state">Tjr_pcache.Pcache_intf.Dcl_types.dcl_state</a></span>, <span class="type-var">'t</span>)</span> Tjr_monad.with_state</span></span> <span>&#45;&gt;</span> <span>abs_ops:<span><span>(<span class="type-var">'op</span>, <span class="type-var">'abs</span>)</span> <a href="../../Tjr_pcache/Pcache_intf/Dcl_types/index.html#type-abs_ops">Tjr_pcache.Pcache_intf.Dcl_types.abs_ops</a></span></span> <span>&#45;&gt;</span> <span><span>(<span class="type-var">'op</span>, <span class="type-var">'abs</span>, <span class="type-var">'ptr</span>, <span class="type-var">'t</span>)</span> <a href="../../Tjr_pcache/Pcache_intf/Dcl_types/index.html#type-dcl_ops">Tjr_pcache.Pcache_intf.Dcl_types.dcl_ops</a></span></code></dt><dd><p>Construct the dcl operations. Parameters:</p><ul><li><code>monad_ops</code>, the monadic operations</li><li><code>pcl_ops</code>, the persistent chunked list ops</li><li><code>with_dcl</code>, access the dcl state</li><li><code>abs_ops</code>, operations on the abstract data (see <a href="../Detachable_map/index.html"><code>Detachable_map</code></a> for an example where the abstract data is a map)</li></ul><p>Returned ops:</p><ul><li><code>add</code> does not force a write (unless a new node is allocated)</li><li><code>detach</code> does force a write</li></ul></dd></dl></div></body></html>